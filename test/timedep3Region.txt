c:=4e-9
setgridsize(32, 32, 1)
setcellsize(c, c, c)

Msat=860e3
Aex=13e-12
alpha=0.2
m=uniform(1, 1, 0)
setgeom(circle(32*4e-9))

f := 1e9
A := 0.01
defRegion(1, xrange(-inf, inf))
B_ext.setRegion(1, vector(A*sin(2*pi*f*t), A*cos(2*pi*f*t), 0))

tableadd(B_ext)
tableautosave(1e-12)

run(0.2e-9)

m_ := average(m)
print(m_)

expect("mx", m_[0], 0.6783973430765087, 1e-7)
expect("my", m_[1], 0.7192199406365456, 1e-7)
expect("mz", m_[2], 0.0212674352335812, 1e-7)
