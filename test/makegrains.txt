// regression test for bug with region > 127

setgridsize(512, 64, 1)
c := 4e-9
setcellsize(c, c, c)
m = twodomain(1,0,0, 0,1,0, -1,0,0)

ext_centerwall(0)

Aex = 13e-12

Msat = 800e3
ext_makegrains(40e-9, 255, 0)
ext_rmsurfacecharge(0, 1, -1)

alpha = 1

for i:=0; i<255; i++{
	Aex.SetRegion(i, 13e-12 + randNorm()*1.3e-12)
	Msat.SetRegion(i, 800e3 + randNorm()*80e3)
}

steps(1000)

alpha=0.01
xi = 0.1

J = vector(1e12, 0, 0)
run(1e-9)
