
setgridsize(100, 50, 2)
setcellsize(5e-9, 4e-9, 3e-9)

Msat = 800e3
Aex = 13e-12
m  = uniform(1, 2, 0)

save(m)
save(m.comp(0))
save(m.comp(1))
save(m.comp(2))

tol := 0
expect("mx", m.comp(0).average(), 1/sqrt(5), tol)
expect("my", m.comp(1).average(), 2/sqrt(5), tol)
expect("mz", m.comp(2).average(), 0/sqrt(5), tol)

